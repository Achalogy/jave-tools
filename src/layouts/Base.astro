---
import ViewTransitions from "astro/components/ViewTransitions.astro";
import {
  IconBrandGithub,
  IconHome,
  IconMap2,
  IconSearch,
  IconSettings,
  IconUser,
} from "@tabler/icons-react";
import CommandPrompter from "../components/commandPrompter.astro";

const { title, desc } = Astro.props;
const themeCookie = Astro.cookies.get("theme")?.value ?? "light";

let clases: {
  name: string;
  id: string;
  url?: string;
  icon?: string;
  createdAt?: number;
}[] = JSON.parse(Astro.cookies.get("clases")?.value ?? "[]");
---

<html lang="es" about="acha">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{title ?? "JaveTools"}</title>
    <meta name="description" content={desc ?? ""} />
    <link rel="icon" type="image/svg+xml" href="/favicon.ico?v=16" />
    <meta name="viewport" content="width=device-width" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <meta name="generator" content={Astro.generator} />

    <!-- Añadir Hack Font -->
    <!-- <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/hack-font/3.3.0/web/hack.min.css"
      integrity="sha512-XgCw4Srl8lC1ECwcaHwAU0WnxQwHkqmInzg9wJLtGB7DRuMaXPuK2k9WJ2AwRDGdrgK9eJpZl2hUlLi2WQssmw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    /> -->

    <meta name="theme-color" content="#ffffff" />
    <link rel="manifest" href="/site.webmanifest" />
  </head>
  <ViewTransitions />
  <body>
    <main id="theme-container" class={themeCookie + " relative"}>
      <CommandPrompter
        list={[
          {
            title: "Centro de alumnado",
            description:
              "Acceso a centro de alumnado, inscripción de materias, intranet, etc",
            href: "https://cs.javeriana.edu.co:8443/psp/CS92PRO/EMPLOYEE/SA/c/SA_LEARNER_SERVICES.SSS_STUDENT_CENTER.GBL",
            id: "centro-alumnado",
          },
          {
            title: "Campus virtual",
            href: "https://campusvirtuallms.javeriana.edu.co/d2l/home",
            description: "Acceso a las clases, notas, etc.",
            id: "campus-virtual",
          },
          {
            title: "Configuración",
            href: "/settings",
            description:
              "Configuración de la aplicación, cambio de tema, agregar clases, etc",
            id: "settings",
          },
          {
            title: "Plan de estudios",
            href: "https://drive.google.com/file/d/10GRkHgHyxEKHVsxJtIAUjQ7nD2Srgojd/view?usp=sharing",
            description: "Ingeniería de sistemas",
            id: "plan-estudios",
          },
          {
            title: "Calendario 2024",
            href: "/settings",
            description: "Fechas importantes, festivos, número de semanas.",
            id: "calendar",
          },
          {
            title: "Salas Biblioteca",
            href: "https://biblioreservas.javeriana.edu.co/r/search/espacios_biblioteca_puj#s-lc-public-pt",
            description:
              "Reservar sala biblioteca, ver reservas generadas, etc.",
            id: "salas-bibliotecas",
          },
          {
            title: "Mapa campus",
            href: "https://www.javeriana.edu.co/nuestras-instalaciones",
            description: "Ubicación de los edificios",
            id: "mapa-campus",
          },
          {
            title: "Parciales programación",
            href: "https://drive.google.com/drive/folders/1aCU_a_ur9dzw9e93ah5r-alnJA8HJTr7?usp=sharing",
            description:
              "Recuperados de sophia https://sophia.javeriana.edu.co",
            id: "parciales-progra",
          },
          {
            title: "Sophia Javeriana",
            href: "https://sophia.javeriana.edu.co/programacion",
            description:
              "Sophia javeriana, anuncios, asignaturas, parciales, talleres, software y demás recursos.",
            id: "sophia-javeriana",
          },
          {
            title: "Microsoft Teams",
            href: "https://teams.microsoft.com/v",
            description: "Grupos, clases de microsoft teams.",
            id: "teams",
          },
          {
            title: "Correo | Outlook",
            href: "https://outlook.office365.com/mail/",
            description: "Enviar y recibir correos electronicos. Email. Mail.",
            id: "outlook",
          },
          ...clases.map((x) => ({
            title: x.name,
            description: x.id,
            href: "https://campusvirtuallms.javeriana.edu.co/d2l/home/" + x.id,
            id: x.id,
          })),
        ]}
      />
      <div
        class={`flex flex-col min-h-screen bg-white dark:bg-gray-900 dark:text-white`}
      >
        <div
          class="select-none p-4 flex justify-between w-full items-center px-[5%] bg-indigo-400 dark:from-gray-800 dark:to-gray-800 text-white"
        >
          <a class="font-semibold hidden xl:flex" href="/">JaveTools</a>
          <a class="flex xl:hidden h-full items-center justify-center" href="/">
            <IconHome size={30} />
          </a>

          <div class="flex gap-4 xl:w-full max-w-[30rem] items-center">
            <div
              id="open-search"
              class="xl:w-full flex items-center gap-2 xl:max-w-[30rem] text-xs xl:text-base text-opacity-60 cursor-pointer p-1 px-3 bg-gray-200 bg-opacity-20 rounded-full"
            >
              <IconSearch size={15} className="hidden xl:flex" />
              <IconSearch size={25} className="flex xl:hidden" />
              <p class="">Buscar | ctrl + k</p>
            </div>
            <a
              title="Centro de alumnado"
              href="https://cs.javeriana.edu.co:8443/psp/CS92PRO/EMPLOYEE/SA/c/SA_LEARNER_SERVICES.SSS_STUDENT_CENTER.GBL"
              target="_blank"
              class="cursor-pointer"
            >
              <IconUser size={30} />
            </a>
            <a
              title="Campus virtual"
              href="https://campusvirtuallms.javeriana.edu.co/d2l/home"
              target="_blank"
              class="cursor-pointer"
            >
              <IconMap2 size={30} />
            </a>
            <a title="Configuración" href="/settings" class="cursor-pointer">
              <IconSettings size={30} />
            </a>
          </div>
        </div>
        <slot />
        <footer
          class="flex flex-col items-center mt-auto p-8 bg-indigo-400 text-center"
        >
          <p class="text-xl xl:text-2xl font-semibold text-white">
            Creado por <a
              target="_blank"
              class="underline"
              href="https://achalogy.dev">Acha</a
            >
          </p>
          <p class="text-white font-semibold text-md xl:text-xl">
            Cursos o ejercicios de programación en <a
              target="_blank"
              class="underline"
              href="https://progra-acha.site">Progra Acha</a
            >
          </p>
          <p class="flex gap-2 text-white">
            Código de esta página disponible en <a
              class="flex gap-1 underline"
              href="https://github.com/Achalogy/jave-tools"
              target="_blank"
            >
              <IconBrandGithub /> Github</a
            >
          </p>
        </footer>
      </div>

      <style is:global>
        /* Hide scrollbar for Chrome, Safari and Opera */
        /* *:-webkit-scrollbar {
          display: none;
        } */

        /* Hide scrollbar for IE, Edge and Firefox */
        * {
          /* -ms-overflow-style: none;
          scrollbar-width: none; */
          /* font-family: "hack"; */
          margin: 0px;
          padding: 0px;
        }

        ::-webkit-scrollbar {
          width: 10px;
        }

        :has(.dark)::-webkit-scrollbar-track {
          background: rgb(17 24 39);
        }

        :has(.dark)::-webkit-scrollbar-thumb {
          background: rgb(110, 115, 124);
          border-radius: 2rem;
        }

        ::-webkit-scrollbar-thumb {
          background: #b0b0b0;
          border-radius: 2rem;
        }

        ::-webkit-scrollbar-thumb:hover {
          background: #8f8f8f;
        }

        p {
          margin: 0px !important;
          padding: 0px !important;
        }

        body {
          background-color: white;
        }

        input {
          @apply rounded-md outline-none px-3 p-2;
        }

        input[type="number"]::-webkit-inner-spin-button,
        input[type="number"]::-webkit-outer-spin-button {
          -webkit-appearance: none;
          margin: 0;
        }
        th,
        td {
          @apply border border-black dark:border-white p-1;
        }

        blockquote {
          @apply bg-gray-100 dark:bg-gray-800 border-l-4 border-l-red-500 p-2 rounded-md;
        }

        pre {
          @apply p-2 rounded-md;
        }

        code:not(pre code) {
          @apply px-2 rounded-md border border-gray-300 dark:border-gray-500;
        }

        .markdown a {
          @apply text-sky-500 underline underline-offset-4 cursor-pointer;
        }

        ol {
          @apply list-decimal list-outside mb-2;
        }

        .katex-html {
          @apply hidden;
        }
      </style>
    </main>
  </body>


</html>
